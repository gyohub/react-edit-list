"use strict";(self.webpackChunkreact_edit_list=self.webpackChunkreact_edit_list||[]).push([[31],{4838:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(3645),l=a.n(n)()((function(e){return e[1]}));l.push([e.id,".table-fixed {\n    table-layout: fixed;\n}\n\n.btn-width {\n    width: 3rem;\n    text-align: end;\n}\n\n.table-rounded td {\n    border-bottom-width: 0;\n}\n\n.table-rounded td:first-child {\n    border-radius: 10px 0 0 10px;\n}\n\n.table-rounded td:last-child {\n    border-radius: 0 10px 10px 0;\n}\n",""]);const s=l},1931:(e,t,a)=>{var n=a(3379),l=a.n(n),s=a(4838);l()(s.Z,{insert:"head",singleton:!1}),s.Z.locals},3031:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var n=a(7294),l=a(9958),s=(a(5577),a(4039),a(1931),a(2035)),o=a(2274),i=a(8494);a(6602);const r=[{name:"Ronald",birthdate:new Date("1980-01-30")},{name:"Archibald",birthdate:new Date("1982-02-28")}],m=[{name:"name",type:"string"},{name:"birthdate",type:"custom"}],d=()=>Promise.resolve(r);function u(){const e=e=>(0,o.Z)(e.birthdate),t=e=>(0,o.Z)(e)?(0,i.Z)(new Date(e),"PP"):"";return n.createElement(l.ZP,{schema:m,onLoad:d,onInsert:e,onUpdate:e,format:{birthdate:function(e){return n.createElement(n.Fragment,null,t(e.value))}},edit:{birthdate:function(e){const a=n.useRef();return n.createElement("div",{className:"w-100"},n.createElement("input",{value:t(e.value),readOnly:!0,onFocus:n.useCallback((()=>a.current.classList.add("show")),[a]),className:"user-select-none w-100"}),n.createElement("div",{className:"dropdown-menu",ref:a},n.createElement(s._W,{mode:"single",selected:e.value,defaultMonth:e.value,onSelect:n.useCallback((t=>{e.onChange(t),a.current.classList.remove("show")}),[e])})))}},className:"table table-light table-fixed align-middle",headClassName:"table-dark",inputClassName:"w-100",thClassName:{product:"col-4",type:"col-3",price:"col-2",stock:"col-2",buttons:"col-1"},btnValidateClassName:"btn btn-success p-0 m-0",btnDeleteClassName:"btn btn-danger py-0 px-1 m-0 mx-1",btnCancelClassName:"btn btn-secondary py-0 px-1 m-0 mx-1"})}},9958:(e,t,a)=>{a.d(t,{ZP:()=>u});var n=a(7294);function l(e){return null!==e.value&&void 0!==e.value?n.createElement(n.Fragment,null,e.value.toString()):n.createElement(n.Fragment,null)}function s(e){return n.createElement(n.Fragment,null,e.value)}function o(e){const t=e.opts.find((t=>t.value==e.value));return n.createElement(n.Fragment,null,t?t.name:"")}function i(e){var t;const a=n.useCallback((t=>e.onChange(""!=t.target.value?+t.target.value:void 0)),[e]);return n.createElement("input",{className:e.className,...e.editProps,value:null!==(t=e.value)&&void 0!==t?t:"",type:"number",onChange:a})}function r(e){var t;const a=n.useCallback((t=>e.onChange(""!=t.target.value?t.target.value:void 0)),[e]);return n.createElement("input",{className:e.className,...e.editProps,value:null!==(t=e.value)&&void 0!==t?t:"",type:"text",onChange:a})}function m(e){var t;const a=n.useCallback((t=>e.onChange(""!=t.target.value?t.target.value:void 0)),[e]);return n.createElement("select",{...e.editProps,className:e.className,value:null!==(t=e.value)&&void 0!==t?t:"",onChange:a},e.opts.map(((e,t)=>n.createElement("option",{key:t,value:e.value},e.name))))}function d(e){var t,a,d;const[u,c]=n.useState(null),v=n.useCallback((()=>e.onDelete&&e.onDelete()),[e]),b=e.disableDelete||void 0===e.onDelete||null!==u?null:e.btnDeleteElement?n.createElement("div",{onClick:v,className:e.btnDeleteClassName},e.btnDeleteElement):n.createElement("button",{className:e.btnDeleteClassName,onClick:v},"x"),C=n.useCallback((()=>{null!==u&&e.onChange(u).then((e=>{!1!==e&&c(null)}))}),[e,u,c]),f=null!==u?e.btnValidateElement?n.createElement("div",{onClick:C,className:e.btnValidateClassName},e.btnValidateElement):n.createElement("button",{className:e.btnValidateClassName,onClick:C},"✓"):null,p=n.useCallback((()=>c(null)),[c]),h=null!==u?e.btnCancelElement?n.createElement("div",{onClick:p,className:e.btnCancelClassName},e.btnCancelElement):n.createElement("button",{className:e.btnCancelClassName,onClick:p},"x"):null,N=n.useCallback((e=>{"Enter"==e.key&&(C(),e.stopPropagation()),"Escape"==e.key&&(p(),e.stopPropagation())}),[C,p]),E=void 0===e.item&&null===u?null!==(t=e.filler)&&void 0!==t?t:n.createElement(n.Fragment,null," "):void 0,y=t=>{var a,n;return null!==(n=null===(a=e.tdClassName)||void 0===a?void 0:a[t])&&void 0!==n?n:"string"==typeof e.tdClassName?e.tdClassName:void 0};return n.createElement(null!==(a=e.trElement)&&void 0!==a?a:"tr",{className:e.trClassName,dataid:e.dataid},...e.schema.map(((t,a)=>{var d,v,b,C,f,p,h,g,k,w,D,x,P,V;let F,Z;if("custom"===t.type)F=null===(d=e.format)||void 0===d?void 0:d[t.name],Z=null===(v=e.edit)||void 0===v?void 0:v[t.name];else if("string"===t.type)F=(null===(b=e.format)||void 0===b?void 0:b[t.name])||s,Z=(null===(C=e.edit)||void 0===C?void 0:C[t.name])||r;else if("number"===t.type)F=(null===(f=e.format)||void 0===f?void 0:f[t.name])||l,Z=(null===(p=e.edit)||void 0===p?void 0:p[t.name])||i;else{if("object"!=typeof t.type)return null;F=(null===(h=e.format)||void 0===h?void 0:h[t.name])||o,Z=(null===(g=e.edit)||void 0===g?void 0:g[t.name])||m}if(null!==u){const l=null===(k=e.editProps)||void 0===k?void 0:k[t.name],s=e=>{u[t.name]=e,c({...u})};if(!Z)throw new Error(`Field ${t.name}:${t.type} has no editor defined`);void 0===(null==u?void 0:u[t.name])&&(u[t.name]=null===(w=e.defaultValues)||void 0===w?void 0:w[t.name]);const o=n.createElement(Z,{value:null!==(D=u[t.name])&&void 0!==D?D:"",opts:t.type,className:e.inputClassName,editProps:l,onChange:s});return n.createElement(null!==(x=e.tdElement)&&void 0!==x?x:"td",{className:y(t.name),key:a,onKeyDown:null!==u?N:void 0},o)}if(!F)throw new Error(`Field ${t.name}:${t.type} has no formatter defined`);return n.createElement(null!==(P=e.tdElement)&&void 0!==P?P:"td",{className:y(t.name),onClick:e.disableUpdate?void 0:()=>c({...e.item}),key:a},void 0!==e.item?F({value:null===(V=null==e?void 0:e.item)||void 0===V?void 0:V[t.name],opts:t.type}):E)})),n.createElement(null!==(d=e.tdElement)&&void 0!==d?d:"td",{className:y("buttons")},n.createElement("div",{style:{display:"flex",flexDirection:"row"}},f,h,b)))}const u=n.forwardRef((function(e,t){var a,l,s,o,i,r;if(!e.schema)throw new Error("schema prop is missing");if(!e.onLoad)throw new Error("onLoad callback is missing");const[m,u]=n.useState([]),c=n.useCallback((()=>{const t=e.onLoad();t instanceof Promise?t.then((e=>u(e))):u(t)}),[e,u]);n.useEffect(c,[c]);const v=n.useCallback((e=>{e.altKey&&"R"==e.key&&(c(),e.stopPropagation())}),[c]);let b=e.trClassName;e.rowClassName&&(b=(b?b+" ":"")+e.rowClassName);let C=e.trClassName;e.insertClassName&&(C=(C?C+" ":"")+e.insertClassName);const f={schema:e.schema,format:e.format,btnValidateClassName:e.btnValidateClassName,btnDeleteClassName:e.btnDeleteClassName,btnValidateElement:e.btnValidateElement,btnDeleteElement:e.btnDeleteElement,btnCancelClassName:e.btnCancelClassName,btnCancelElement:e.btnCancelElement,inputClassName:e.inputClassName,tdClassName:e.tdClassName,trElement:e.trElement,tdElement:e.tdElement,edit:e.edit,editProps:e.editProps,disableDelete:e.disableDelete,disableUpdate:e.disableUpdate};return n.createElement(null!==(a=e.tableElement)&&void 0!==a?a:"table",{className:e.className,ref:t,onKeyDown:v},[null!==e.headers?n.createElement(null!==(l=e.theadElement)&&void 0!==l?l:"thead",{key:"thead",className:e.headClassName},n.createElement(null!==(s=e.trElement)&&void 0!==s?s:"tr",{className:e.trClassName},...e.schema.map(((t,a)=>{var l,s,o,i;if("id"===t.type)return null;const r=(null===(l=e.thClassName)||void 0===l?void 0:l[t.name])||e.thClassName;return(null===(s=e.headers)||void 0===s?void 0:s[t.name])?n.createElement(null!==(o=e.thElement)&&void 0!==o?o:"th",{key:a,className:r},e.headers[t.name]):n.createElement(null!==(i=e.thElement)&&void 0!==i?i:"th",{key:a,className:r},t.name)})),n.createElement(null!==(o=e.thElement)&&void 0!==o?o:"th",{key:"buttons",className:(null===(i=e.thClassName)||void 0===i?void 0:i.buttons)||e.thClassName}))):null,n.createElement(null!==(r=e.tbodyElement)&&void 0!==r?r:"tbody",{key:"tbody",className:e.bodyClassName},...m.map(((t,a)=>n.createElement(d,{key:a,item:t,dataid:a,...f,trClassName:b,onChange:async a=>{if(e.onUpdate){const n=await e.onUpdate(a,t);if(!1===n)return!1;"object"==typeof n&&(a=n)}const n=[...m];if(n[n.findIndex((e=>e===t))]=a,e.onChange){const t=await e.onChange(n);if(!1===t)return!1;if(!0===t)return c()}u([...n])},onDelete:async()=>{if(e.onDelete&&!1===await e.onDelete(t))return;const a=m.findIndex((e=>e===t)),n=[...m];if(n.splice(a,1),e.onChange){const t=await e.onChange(n);if(!1===t)return!1;if(!0===t)return c()}u([...n])}}))),e.disableInsert?null:n.createElement(d,{dataid:m.length,...f,defaultValues:e.defaultValues,filler:e.filler,trClassName:C,onChange:async t=>{if(e.onInsert){const a=await e.onInsert(t);if(!1===a)return!1;"object"==typeof a&&(t=a)}if(e.onChange){const a=[...m];a.push(t);const n=await e.onChange(a);if(!1===n)return!1;if(!0===n)return c()}m.push(t),u([...m])}}))])}))}}]);