"use strict";(self.webpackChunkreact_edit_list=self.webpackChunkreact_edit_list||[]).push([[182],{4838:(e,t,a)=>{a.d(t,{Z:()=>s});var l=a(3645),n=a.n(l)()((function(e){return e[1]}));n.push([e.id,".table-fixed {\n    table-layout: fixed;\n}\n\n.btn-width {\n    width: 3rem;\n    text-align: end;\n}\n\n.table-rounded td {\n    border-bottom-width: 0;\n}\n\n.table-rounded td:first-child {\n    border-radius: 10px 0 0 10px;\n}\n\n.table-rounded td:last-child {\n    border-radius: 0 10px 10px 0;\n}\n",""]);const s=n},1931:(e,t,a)=>{var l=a(3379),n=a.n(l),s=a(4838);n()(s.Z,{insert:"head",singleton:!1}),s.Z.locals},1182:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var l=a(7294),n=a(9958);a(4039),a(1931);const s=[{name:"id",type:"id"},{name:"product",type:"string"},{name:"type",type:[{value:"1",name:"capex"},{value:"2",name:"consumable"}]},{name:"price",type:"number"},{name:"stock",type:"number"}],i=[];for(let e=0;e<9995;e++)i.push({id:e,product:`Product #${e}`,type:Math.round(Math.random()+1),price:Math.round(100*Math.random()),stock:Math.round(500*Math.random())});function o(){const e=l.useRef(),[t,a]=l.useState(0),o=l.useCallback((()=>i.slice(20*t,20*(t+1))),[t]),m=Math.ceil(i.length/20);return l.createElement("div",null,l.createElement("nav",null,l.createElement("ul",{className:"pagination user-select-none"},l.createElement("li",{className:"page-item"},l.createElement("a",{className:"page-link",onClick:()=>a(0)},"First")),l.createElement("li",{className:"page-item"+(t>0?"":" disabled")},l.createElement("a",{className:"page-link",onClick:()=>a(t-1)},"Previous")),l.createElement("li",{className:"page-item"+(t>0?"":" disabled")},l.createElement("a",{className:"btn-width page-link",onClick:()=>a(t-1)},t>0?t:l.createElement(l.Fragment,null," "))),l.createElement("li",{className:"page-item active"},l.createElement("a",{className:"btn-width page-link active"},t+1)),l.createElement("li",{className:"page-item"+(t<m-1?"":" disabled")},l.createElement("a",{className:"btn-width page-link",onClick:()=>a(t+1)},t+2<m?t+2:l.createElement(l.Fragment,null," "))),l.createElement("li",{className:"page-item"+(t<m-1?"":" disabled")},l.createElement("a",{className:"page-link",onClick:()=>a(t+1)},"Next")),l.createElement("li",{className:"page-item"},l.createElement("a",{className:"page-link",onClick:()=>a(m-1)},"Last")))),l.createElement(n.ZP,{ref:e,schema:s,onLoad:o,onDelete:e=>{if(!confirm("Are you sure you want to delete it?"))return!1},onChange:e=>(i.splice(20*t,20,...e),!0),className:"table table-light table-fixed align-middle",headClassName:"table-primary",inputClassName:"w-100",thClassName:{product:"col-4",type:"col-3",price:"col-2",stock:"col-2",buttons:"col-1"},btnValidateClassName:"btn btn-success p-0 m-0",btnDeleteClassName:"btn btn-danger py-0 px-1 m-0 mx-1",btnCancelClassName:"btn btn-secondary py-0 px-1 m-0 mx-1",disableInsert:t!=m-1}))}},9958:(e,t,a)=>{a.d(t,{ZP:()=>c});var l=a(7294);function n(e){return null!==e.value&&void 0!==e.value?l.createElement(l.Fragment,null,e.value.toString()):l.createElement(l.Fragment,null)}function s(e){return l.createElement(l.Fragment,null,e.value)}function i(e){const t=e.opts.find((t=>t.value==e.value));return l.createElement(l.Fragment,null,t?t.name:"")}function o(e){var t;const a=l.useCallback((t=>e.onChange(""!=t.target.value?+t.target.value:void 0)),[e]);return l.createElement("input",{className:e.className,...e.editProps,value:null!==(t=e.value)&&void 0!==t?t:"",type:"number",onChange:a})}function m(e){var t;const a=l.useCallback((t=>e.onChange(""!=t.target.value?t.target.value:void 0)),[e]);return l.createElement("input",{className:e.className,...e.editProps,value:null!==(t=e.value)&&void 0!==t?t:"",type:"text",onChange:a})}function r(e){var t;const a=l.useCallback((t=>e.onChange(""!=t.target.value?t.target.value:void 0)),[e]);return l.createElement("select",{...e.editProps,className:e.className,value:null!==(t=e.value)&&void 0!==t?t:"",onChange:a},e.opts.map(((e,t)=>l.createElement("option",{key:t,value:e.value},e.name))))}function d(e){var t,a,d;const[c,u]=l.useState(null),v=l.useCallback((()=>e.onDelete&&e.onDelete()),[e]),p=e.disableDelete||void 0===e.onDelete||null!==c?null:e.btnDeleteElement?l.createElement("div",{onClick:v,className:e.btnDeleteClassName},e.btnDeleteElement):l.createElement("button",{className:e.btnDeleteClassName,onClick:v},"x"),b=l.useCallback((()=>{null!==c&&e.onChange(c).then((e=>{!1!==e&&u(null)}))}),[e,c,u]),C=null!==c?e.btnValidateElement?l.createElement("div",{onClick:b,className:e.btnValidateClassName},e.btnValidateElement):l.createElement("button",{className:e.btnValidateClassName,onClick:b},"✓"):null,E=l.useCallback((()=>u(null)),[u]),N=null!==c?e.btnCancelElement?l.createElement("div",{onClick:E,className:e.btnCancelClassName},e.btnCancelElement):l.createElement("button",{className:e.btnCancelClassName,onClick:E},"x"):null,h=l.useCallback((e=>{"Enter"==e.key&&(b(),e.stopPropagation()),"Escape"==e.key&&(E(),e.stopPropagation())}),[b,E]),f=void 0===e.item&&null===c?null!==(t=e.filler)&&void 0!==t?t:l.createElement(l.Fragment,null," "):void 0,g=t=>{var a,l;return null!==(l=null===(a=e.tdClassName)||void 0===a?void 0:a[t])&&void 0!==l?l:"string"==typeof e.tdClassName?e.tdClassName:void 0};return l.createElement(null!==(a=e.trElement)&&void 0!==a?a:"tr",{className:e.trClassName,dataid:e.dataid},...e.schema.map(((t,a)=>{var d,v,p,b,C,E,N,y,k,w,D,x,P,V;let F,M;if("custom"===t.type)F=null===(d=e.format)||void 0===d?void 0:d[t.name],M=null===(v=e.edit)||void 0===v?void 0:v[t.name];else if("string"===t.type)F=(null===(p=e.format)||void 0===p?void 0:p[t.name])||s,M=(null===(b=e.edit)||void 0===b?void 0:b[t.name])||m;else if("number"===t.type)F=(null===(C=e.format)||void 0===C?void 0:C[t.name])||n,M=(null===(E=e.edit)||void 0===E?void 0:E[t.name])||o;else{if("object"!=typeof t.type)return null;F=(null===(N=e.format)||void 0===N?void 0:N[t.name])||i,M=(null===(y=e.edit)||void 0===y?void 0:y[t.name])||r}if(null!==c){const n=null===(k=e.editProps)||void 0===k?void 0:k[t.name],s=e=>{c[t.name]=e,u({...c})};if(!M)throw new Error(`Field ${t.name}:${t.type} has no editor defined`);void 0===(null==c?void 0:c[t.name])&&(c[t.name]=null===(w=e.defaultValues)||void 0===w?void 0:w[t.name]);const i=l.createElement(M,{value:null!==(D=c[t.name])&&void 0!==D?D:"",opts:t.type,className:e.inputClassName,editProps:n,onChange:s});return l.createElement(null!==(x=e.tdElement)&&void 0!==x?x:"td",{className:g(t.name),key:a,onKeyDown:null!==c?h:void 0},i)}if(!F)throw new Error(`Field ${t.name}:${t.type} has no formatter defined`);return l.createElement(null!==(P=e.tdElement)&&void 0!==P?P:"td",{className:g(t.name),onClick:e.disableUpdate?void 0:()=>u({...e.item}),key:a},void 0!==e.item?F({value:null===(V=null==e?void 0:e.item)||void 0===V?void 0:V[t.name],opts:t.type}):f)})),l.createElement(null!==(d=e.tdElement)&&void 0!==d?d:"td",{className:g("buttons")},l.createElement("div",{style:{display:"flex",flexDirection:"row"}},C,N,p)))}const c=l.forwardRef((function(e,t){var a,n,s,i,o,m;if(!e.schema)throw new Error("schema prop is missing");if(!e.onLoad)throw new Error("onLoad callback is missing");const[r,c]=l.useState([]),u=l.useCallback((()=>{const t=e.onLoad();t instanceof Promise?t.then((e=>c(e))):c(t)}),[e,c]);l.useEffect(u,[u]);const v=l.useCallback((e=>{e.altKey&&"R"==e.key&&(u(),e.stopPropagation())}),[u]);let p=e.trClassName;e.rowClassName&&(p=(p?p+" ":"")+e.rowClassName);let b=e.trClassName;e.insertClassName&&(b=(b?b+" ":"")+e.insertClassName);const C={schema:e.schema,format:e.format,btnValidateClassName:e.btnValidateClassName,btnDeleteClassName:e.btnDeleteClassName,btnValidateElement:e.btnValidateElement,btnDeleteElement:e.btnDeleteElement,btnCancelClassName:e.btnCancelClassName,btnCancelElement:e.btnCancelElement,inputClassName:e.inputClassName,tdClassName:e.tdClassName,trElement:e.trElement,tdElement:e.tdElement,edit:e.edit,editProps:e.editProps,disableDelete:e.disableDelete,disableUpdate:e.disableUpdate};return l.createElement(null!==(a=e.tableElement)&&void 0!==a?a:"table",{className:e.className,ref:t,onKeyDown:v},[null!==e.headers?l.createElement(null!==(n=e.theadElement)&&void 0!==n?n:"thead",{key:"thead",className:e.headClassName},l.createElement(null!==(s=e.trElement)&&void 0!==s?s:"tr",{className:e.trClassName},...e.schema.map(((t,a)=>{var n,s,i,o;if("id"===t.type)return null;const m=(null===(n=e.thClassName)||void 0===n?void 0:n[t.name])||e.thClassName;return(null===(s=e.headers)||void 0===s?void 0:s[t.name])?l.createElement(null!==(i=e.thElement)&&void 0!==i?i:"th",{key:a,className:m},e.headers[t.name]):l.createElement(null!==(o=e.thElement)&&void 0!==o?o:"th",{key:a,className:m},t.name)})),l.createElement(null!==(i=e.thElement)&&void 0!==i?i:"th",{key:"buttons",className:(null===(o=e.thClassName)||void 0===o?void 0:o.buttons)||e.thClassName}))):null,l.createElement(null!==(m=e.tbodyElement)&&void 0!==m?m:"tbody",{key:"tbody",className:e.bodyClassName},...r.map(((t,a)=>l.createElement(d,{key:a,item:t,dataid:a,...C,trClassName:p,onChange:async a=>{if(e.onUpdate){const l=await e.onUpdate(a,t);if(!1===l)return!1;"object"==typeof l&&(a=l)}const l=[...r];if(l[l.findIndex((e=>e===t))]=a,e.onChange){const t=await e.onChange(l);if(!1===t)return!1;if(!0===t)return u()}c([...l])},onDelete:async()=>{if(e.onDelete&&!1===await e.onDelete(t))return;const a=r.findIndex((e=>e===t)),l=[...r];if(l.splice(a,1),e.onChange){const t=await e.onChange(l);if(!1===t)return!1;if(!0===t)return u()}c([...l])}}))),e.disableInsert?null:l.createElement(d,{dataid:r.length,...C,defaultValues:e.defaultValues,filler:e.filler,trClassName:b,onChange:async t=>{if(e.onInsert){const a=await e.onInsert(t);if(!1===a)return!1;"object"==typeof a&&(t=a)}if(e.onChange){const a=[...r];a.push(t);const l=await e.onChange(a);if(!1===l)return!1;if(!0===l)return u()}r.push(t),c([...r])}}))])}))}}]);