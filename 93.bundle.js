"use strict";(self.webpackChunkreact_edit_list=self.webpackChunkreact_edit_list||[]).push([[93],{4838:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(3645),l=n.n(a)()((function(e){return e[1]}));l.push([e.id,".table-fixed {\n    table-layout: fixed;\n}\n\n.btn-width {\n    width: 3rem;\n    text-align: end;\n}\n\n.table-rounded td {\n    border-bottom-width: 0;\n}\n\n.table-rounded td:first-child {\n    border-radius: 10px 0 0 10px;\n}\n\n.table-rounded td:last-child {\n    border-radius: 0 10px 10px 0;\n}\n",""]);const o=l},1931:(e,t,n)=>{var a=n(3379),l=n.n(a),o=n(4838);l()(o.Z,{insert:"head",singleton:!1}),o.Z.locals},2093:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var a=n(7294),l=n(9958);n(4039),n(1931);const o=[{id:1,product:"Desk",type:"1",price:100,stock:20},{id:2,product:"Printer",type:"1",price:500,stock:10},{id:3,product:"Paper",type:"2",price:5,stock:2e3},{id:4,product:"Chair",type:"1",price:50,stock:50},{id:5,product:"Computer",type:"1",price:1e3,stock:20},{id:6,product:"Rent",type:void 0,price:2e3,stock:void 0}],s=[{name:"id",type:"id"},{name:"product",type:"string"},{name:"type",type:[{value:void 0,name:""},{value:"1",name:"capex"},{value:"2",name:"consumable"}]},{name:"price",type:"number"},{name:"stock",type:"number"}],r=()=>Promise.resolve(o);function i(){const e=a.useRef();return a.createElement("div",null,a.createElement("button",{className:"btn btn-primary mb-4",onClick:()=>{var t;null===(t=e.current)||void 0===t||t.dispatchEvent(new KeyboardEvent("keydown",{key:"R",altKey:!0,bubbles:!0}))}},"Reload"),a.createElement(l.ZP,{ref:e,schema:s,onLoad:r,onUpdate:e=>{if(e.price>2e3)return alert("Price is limited to 2000€"),!1;console.log("UPDATE",e)},onDelete:e=>{if(!confirm("Are you sure you want to delete it?"))return!1;console.log("DELETE",e)},onInsert:e=>void 0===e.product||void 0===e.price?(alert("Product and price are mandatory"),!1):(console.log("INSERT",e),Promise.resolve({...e,id:Math.round(1e6*Math.random())})),format:{price:e=>a.createElement(a.Fragment,null,void 0!==e.value?`${e.value} €`:void 0)},onChange:e=>{console.log("DATA",e)},headers:{price:a.createElement("span",null,"price (€)")},editProps:{price:{min:5,max:2e3,step:5},stock:{min:0}},className:"table table-striped table-fixed align-middle",headClassName:"table-light",inputClassName:"w-100",thClassName:{product:"col-3",type:"col-2",price:"col-3",stock:"col-1",buttons:"col-3"},btnValidateElement:a.createElement("button",{className:"btn btn-primary"},"YES!"),btnCancelElement:a.createElement("button",{className:"ms-2 btn btn-secondary"},"NEVER"),btnDeleteElement:a.createElement("button",{className:"btn btn-danger"},"REMOVE"),defaultValues:{type:1,price:5,stock:10},filler:a.createElement(a.Fragment,null,"…")}))}},9958:(e,t,n)=>{n.d(t,{ZP:()=>c});var a=n(7294);function l(e){return null!==e.value&&void 0!==e.value?a.createElement(a.Fragment,null,e.value.toString()):a.createElement(a.Fragment,null)}function o(e){return a.createElement(a.Fragment,null,e.value)}function s(e){const t=e.opts.find((t=>t.value==e.value));return a.createElement(a.Fragment,null,t?t.name:"")}function r(e){var t;const n=a.useCallback((t=>e.onChange(""!=t.target.value?+t.target.value:void 0)),[e]);return a.createElement("input",{className:e.className,...e.editProps,value:null!==(t=e.value)&&void 0!==t?t:"",type:"number",onChange:n})}function i(e){var t;const n=a.useCallback((t=>e.onChange(""!=t.target.value?t.target.value:void 0)),[e]);return a.createElement("input",{className:e.className,...e.editProps,value:null!==(t=e.value)&&void 0!==t?t:"",type:"text",onChange:n})}function d(e){var t;const n=a.useCallback((t=>e.onChange(""!=t.target.value?t.target.value:void 0)),[e]);return a.createElement("select",{...e.editProps,className:e.className,value:null!==(t=e.value)&&void 0!==t?t:"",onChange:n},e.opts.map(((e,t)=>a.createElement("option",{key:t,value:e.value},e.name))))}function m(e){var t,n,m;const[c,u]=a.useState(null),v=a.useCallback((()=>e.onDelete&&e.onDelete()),[e]),p=e.disableDelete||void 0===e.onDelete||null!==c?null:e.btnDeleteElement?a.createElement("div",{onClick:v,className:e.btnDeleteClassName},e.btnDeleteElement):a.createElement("button",{className:e.btnDeleteClassName,onClick:v},"x"),b=a.useCallback((()=>{null!==c&&e.onChange(c).then((e=>{!1!==e&&u(null)}))}),[e,c,u]),E=null!==c?e.btnValidateElement?a.createElement("div",{onClick:b,className:e.btnValidateClassName},e.btnValidateElement):a.createElement("button",{className:e.btnValidateClassName,onClick:b},"✓"):null,C=a.useCallback((()=>u(null)),[u]),f=null!==c?e.btnCancelElement?a.createElement("div",{onClick:C,className:e.btnCancelClassName},e.btnCancelElement):a.createElement("button",{className:e.btnCancelClassName,onClick:C},"x"):null,N=a.useCallback((e=>{"Enter"==e.key&&(b(),e.stopPropagation()),"Escape"==e.key&&(C(),e.stopPropagation())}),[b,C]),h=void 0===e.item&&null===c?null!==(t=e.filler)&&void 0!==t?t:a.createElement(a.Fragment,null," "):void 0,y=t=>{var n,a;return null!==(a=null===(n=e.tdClassName)||void 0===n?void 0:n[t])&&void 0!==a?a:"string"==typeof e.tdClassName?e.tdClassName:void 0};return a.createElement(null!==(n=e.trElement)&&void 0!==n?n:"tr",{className:e.trClassName,dataid:e.dataid},...e.schema.map(((t,n)=>{var m,v,p,b,E,C,f,g,k,w,D,P,x,V;let F,R;if("custom"===t.type)F=null===(m=e.format)||void 0===m?void 0:m[t.name],R=null===(v=e.edit)||void 0===v?void 0:v[t.name];else if("string"===t.type)F=(null===(p=e.format)||void 0===p?void 0:p[t.name])||o,R=(null===(b=e.edit)||void 0===b?void 0:b[t.name])||i;else if("number"===t.type)F=(null===(E=e.format)||void 0===E?void 0:E[t.name])||l,R=(null===(C=e.edit)||void 0===C?void 0:C[t.name])||r;else{if("object"!=typeof t.type)return null;F=(null===(f=e.format)||void 0===f?void 0:f[t.name])||s,R=(null===(g=e.edit)||void 0===g?void 0:g[t.name])||d}if(null!==c){const l=null===(k=e.editProps)||void 0===k?void 0:k[t.name],o=e=>{c[t.name]=e,u({...c})};if(!R)throw new Error(`Field ${t.name}:${t.type} has no editor defined`);void 0===(null==c?void 0:c[t.name])&&(c[t.name]=null===(w=e.defaultValues)||void 0===w?void 0:w[t.name]);const s=a.createElement(R,{value:null!==(D=c[t.name])&&void 0!==D?D:"",opts:t.type,className:e.inputClassName,editProps:l,onChange:o});return a.createElement(null!==(P=e.tdElement)&&void 0!==P?P:"td",{className:y(t.name),key:n,onKeyDown:null!==c?N:void 0},s)}if(!F)throw new Error(`Field ${t.name}:${t.type} has no formatter defined`);return a.createElement(null!==(x=e.tdElement)&&void 0!==x?x:"td",{className:y(t.name),onClick:e.disableUpdate?void 0:()=>u({...e.item}),key:n},void 0!==e.item?F({value:null===(V=null==e?void 0:e.item)||void 0===V?void 0:V[t.name],opts:t.type}):h)})),a.createElement(null!==(m=e.tdElement)&&void 0!==m?m:"td",{className:y("buttons")},a.createElement("div",{style:{display:"flex",flexDirection:"row"}},E,f,p)))}const c=a.forwardRef((function(e,t){var n,l,o,s,r,i;if(!e.schema)throw new Error("schema prop is missing");if(!e.onLoad)throw new Error("onLoad callback is missing");const[d,c]=a.useState([]),u=a.useCallback((()=>{const t=e.onLoad();t instanceof Promise?t.then((e=>c(e))):c(t)}),[e,c]);a.useEffect(u,[u]);const v=a.useCallback((e=>{e.altKey&&"R"==e.key&&(u(),e.stopPropagation())}),[u]);let p=e.trClassName;e.rowClassName&&(p=(p?p+" ":"")+e.rowClassName);let b=e.trClassName;e.insertClassName&&(b=(b?b+" ":"")+e.insertClassName);const E={schema:e.schema,format:e.format,btnValidateClassName:e.btnValidateClassName,btnDeleteClassName:e.btnDeleteClassName,btnValidateElement:e.btnValidateElement,btnDeleteElement:e.btnDeleteElement,btnCancelClassName:e.btnCancelClassName,btnCancelElement:e.btnCancelElement,inputClassName:e.inputClassName,tdClassName:e.tdClassName,trElement:e.trElement,tdElement:e.tdElement,edit:e.edit,editProps:e.editProps,disableDelete:e.disableDelete,disableUpdate:e.disableUpdate};return a.createElement(null!==(n=e.tableElement)&&void 0!==n?n:"table",{className:e.className,ref:t,onKeyDown:v},[null!==e.headers?a.createElement(null!==(l=e.theadElement)&&void 0!==l?l:"thead",{key:"thead",className:e.headClassName},a.createElement(null!==(o=e.trElement)&&void 0!==o?o:"tr",{className:e.trClassName},...e.schema.map(((t,n)=>{var l,o,s,r;if("id"===t.type)return null;const i=(null===(l=e.thClassName)||void 0===l?void 0:l[t.name])||e.thClassName;return(null===(o=e.headers)||void 0===o?void 0:o[t.name])?a.createElement(null!==(s=e.thElement)&&void 0!==s?s:"th",{key:n,className:i},e.headers[t.name]):a.createElement(null!==(r=e.thElement)&&void 0!==r?r:"th",{key:n,className:i},t.name)})),a.createElement(null!==(s=e.thElement)&&void 0!==s?s:"th",{key:"buttons",className:(null===(r=e.thClassName)||void 0===r?void 0:r.buttons)||e.thClassName}))):null,a.createElement(null!==(i=e.tbodyElement)&&void 0!==i?i:"tbody",{key:"tbody",className:e.bodyClassName},...d.map(((t,n)=>a.createElement(m,{key:n,item:t,dataid:n,...E,trClassName:p,onChange:async n=>{if(e.onUpdate){const a=await e.onUpdate(n,t);if(!1===a)return!1;"object"==typeof a&&(n=a)}const a=[...d];if(a[a.findIndex((e=>e===t))]=n,e.onChange){const t=await e.onChange(a);if(!1===t)return!1;if(!0===t)return u()}c([...a])},onDelete:async()=>{if(e.onDelete&&!1===await e.onDelete(t))return;const n=d.findIndex((e=>e===t)),a=[...d];if(a.splice(n,1),e.onChange){const t=await e.onChange(a);if(!1===t)return!1;if(!0===t)return u()}c([...a])}}))),e.disableInsert?null:a.createElement(m,{dataid:d.length,...E,defaultValues:e.defaultValues,filler:e.filler,trClassName:b,onChange:async t=>{if(e.onInsert){const n=await e.onInsert(t);if(!1===n)return!1;"object"==typeof n&&(t=n)}if(e.onChange){const n=[...d];n.push(t);const a=await e.onChange(n);if(!1===a)return!1;if(!0===a)return u()}d.push(t),c([...d])}}))])}))}}]);